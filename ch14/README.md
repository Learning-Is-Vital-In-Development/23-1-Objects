---

marp: true

---

# 14장
# 일관성 있는 협력

---

# 재사용

* 객체지향 패러다임의 장점은 설계를 재사용할 수 있다는 것이다.
* 재사용을 위해서는 객체들의 협력 방식을 일관성 있게 만들어야한다.

---

# 일관성

* 일관성은 설계에 드는 비용을 감소시킨다.
* 일관성 있는 설계가 가져다 주는 더 큰 이익은 코드가 이해하기 쉬워진다는 것이다.
* 가능하면 유사한 기능을 구현하기 위해 유사한 협력 패턴을 사용하라
    * 시스템을 이해하고 확장하기 위해 요구되는 정신적인 부담을 크게 줄일 수 있다.

---

# 일관성 없는 코드

문제점 :
* 새로운 구현을 추가해야 하는 경우
* 코드를 이해하기 어렵다.

**유사한 기능을 서로 다른 방식으로 구현해서는 안 된다.**

객체지향에서 기능을 구현하는 유일한 방법은 객체 사이의 협력을 만드는 것뿐이므로 유지보수 가능한 시스템을 구축하는 첫걸음은 협력을 일관성 있게 만드는 것이다.

---

# 일관성 부여하기

* 다양한 설계 경험을 익혀봐야 한다.
* 널리 알려진 디자인 패턴을 학습하고 변경이라는 문맥안에서 디자인 패턴을 적용해 봐야한다.

---

# 일관성 부여하기

디자인 패턴이 적합하지 않는 경우가 존재한다. 따라서 협력을 일관성 있게 만들기 위해 다음과 같은 지침을 따르면 좋다.

* 변하는 개념을 변하지 않는 개념으로부터 분리하라.
* 변하는 개념을 캡슐화하라.

핵심은 훌륭한 추상화를 찾아 추상화에 의존하도록 만드는 것이다.

---

# 캠슐화

* 캡슐화는 데이터 은닉 이상이다.
* 캡슐화란 변하는 어떤 것이든 감추는 것이다.
* 대표적인 예로 객체의 퍼블릭 인터페이스와 구현을 분리하는 것이다.


![](https://blog.kakaocdn.net/dn/FynrR/btq9yL0P6Zz/mLah1Tgq2EqBYmAXGFVcpK/img.png)

---

# 캡슐화의 종류

코드 수정으로 인한 파급효과를 제어할 수 있는 모든 기법이 캡슐화의 일종이다.

* 데이터 캡슐화 : 객체 내부에 관리하는 데이터 캡슐화
* 메서드 캡슐화 : 클래스의 내부 행동을 캡슐화
* 객체 캡슐화 : 객체와 객체 사이의 관계를 캡슐화(합성)
* 서브타입 캡슐화 : 서브타입의 종류를 캡슐화(ex: DiscountPolicy)

---

# 캡슐화의 종류

![](https://i.ibb.co/0C12DKb/4.png)

---

# 개념적 무결성(일관성)

* 유사한 기능에 대해 유사한 협력 패턴을 적용하는 것은 객체지향 시스템에서 개념적 무결성(일관성)을 유지할 수 있는 가장 효과적인 방법이다.

* 시스템이 일관성 있는 몇 개의 협력 패턴으로 구성된다면 시스템을 이해하고, 수정하고, 확장하는 데 필요한 노력과 시간을 아낄 수 있다.

협력을 설계하고 있다면 항상 기존의 협력 패턴을 따를 수 없는지 고민하라.

---

# 지속적으로 개선하라

* 협력은 고정된 것이 아니다.
* 요구사항의 변경에 따라 협력 역시 지속적으로 개선해야 한다.
* 중요한 것은 현재의 설계에 맹목적으로 일관성을 맞추는 것이 아니라 달라지는 변경의 방향에 맞춰 지속적으로 코드를 개선하려는 의지다.

---

# 정리

* 일관성 있는 협력의 핵심은 변경을 분리하고 캡슐화하는 것이다.
* 변경에 탄력적으로 대응할 수 있는 다양한 캡슐화 방법과 설계 방법을 익히것이 중요하다.
* 변경을 수용할 수 있는 적절한 역할과 책임을 찾다 보면 협력의 일관성이 서서히 윤곽을 드러낼 것이다.

---

#### 참고 https://incheol-jung.gitbook.io/docs/study/object/2020-03-10-object-chap14